<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏•‡∏∂‡∏Å JTM Family Trip</title>
  <style>
    body { 
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans Thai", sans-serif; 
      margin: 0; 
      padding: 24px; 
      line-height: 1.5; 
      background-color: #f8fafc;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background-color: white;
      padding: 32px;
      border-radius: 16px;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }
    h1 { margin-bottom: 8px; }
    .card { border: 1px solid #e5e7eb; border-radius: 12px; padding: 16px; margin-bottom: 16px; }
    label { display: block; font-weight: 600; margin: 12px 0 6px; }
    input[type="text"], select { width: 100%; max-width: 100%; padding: 10px; border: 1px solid #cbd5e1; border-radius: 8px; }
    .items { display: grid; grid-template-columns: 1fr auto; gap: 8px 16px; align-items: center; }
    .item-name { font-size: 14px; }
    .qty { width: 80px; }
    .total { font-size: 18px; font-weight: 700; }
    .hint { color: #64748b; font-size: 13px; }
    .banner { grid-column: 1 / -1; margin: 8px 0; text-align: center; }
    .banner img { width: 100%; max-width: 100%; height: auto; display: block; margin: 0 auto; border-radius: 12px; object-fit: contain; }
    .error { color: #b91c1c; }
    .success { color: #065f46; }
    button { padding: 12px 18px; border-radius: 10px; border: 0; background:#111827; color: #fff; cursor: pointer; }
    button[disabled]{ opacity: .6; cursor: not-allowed; }
    .footer-note { font-size: 13px; color:#475569; }
    
    /* Construction Banner Styles */
    .construction-banner {
      background: linear-gradient(135deg, #ff6b35, #f7931e);
      border: 2px solid #e74c3c;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 4px 12px rgba(231, 76, 60, 0.3);
      animation: pulse 2s infinite;
    }
    .construction-content {
      text-align: center;
      color: white;
    }
    .construction-content h3 {
      margin: 0 0 12px 0;
      font-size: 20px;
      font-weight: 700;
    }
    .construction-content p {
      margin: 8px 0;
      font-size: 14px;
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.8; }
    }
    
    @media (max-width: 768px) {
      body { padding: 16px; }
      .container { padding: 20px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏•‡∏∂‡∏Å JTM Family Trip</h1>
    
    <!-- Under Construction Banner -->
    <div id="constructionBanner" class="construction-banner" style="display: none;">
      <div class="construction-content">
        <h3>üöß ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏∞‡∏ö‡∏ö üöß</h3>
        <p>‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á  ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö Preorder ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</p>
      </div>
    </div>
    
    <p class="hint">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ </p>

    <form id="orderForm" enctype="multipart/form-data">
    <!-- Main Input -->
    <div class="card">
      <h3>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h3>

      <label for="contactName">‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠ ‡∏®‡∏¥‡∏©‡∏¢‡πå‡πÄ‡∏Å‡πà‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏®‡∏¥‡∏©‡∏¢‡πå‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô ‡πÅ‡∏•‡∏∞‡∏´‡πâ‡∏≠‡∏á ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ô‡πÉ‡∏î‡∏Ñ‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</label>
      <input id="contactName" name="contactName" type="text" required placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô+‡∏´‡πâ‡∏≠‡∏á ‡πÄ‡∏ä‡πà‡∏ô ‡∏ó‡∏≠‡∏Ñ‡∏∏‡∏ì ‡∏ö‡πâ‡∏≤‡∏ô‡∏Ñ‡∏¥‡∏î‡∏î‡∏µ"" />

      <label for="batch">‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏∏‡πà‡∏ô‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏‡πÉ‡∏ô‡∏Ç‡πâ‡∏≠‡πÅ‡∏£‡∏Å</label>
      <select id="batch" name="batch" required>
        <option value="">-- ‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å --</option>
        <option>JTM#18</option>
        <option>JTM#19</option>
        <option>JTM#20</option>
        <option>JTM#21</option>
        <option>JTM#22</option>
        <option>JTM#23</option>
        <option>JTM#24</option>
        <option>JTM#25</option>
        <option>JTM#26</option>
        <option>JTM#27</option>
        <option>‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏π</option>
        <option>‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
      </select>

      <label for="batchOther">‡∏Å‡∏£‡∏ì‡∏µ‡∏£‡∏∏‡πà‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏∏‡πà‡∏ô</label>
      <input id="batchOther" name="batchOther" type="text" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏∏‡πà‡∏ô (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)" />
      <p class="hint">* ‡∏´‡∏≤‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "‡∏≠‡∏∑‡πà‡∏ô‡πÜ" ‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏∏‡πà‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô</p>

      <label for="phoneNumber">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</label>
      <input id="phoneNumber" name="phoneNumber" type="tel" required placeholder="081-234-5678" pattern="[0-9\-]+" />
      <p class="hint">* ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏•‡∏±‡∏ö</p>
    </div>

    <!-- Shop order (auto from JSON config) -->
    <div class="card">
      <h3>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
      <div id="itemsContainer" class="items"></div>
      <hr />
      <div style="display: flex; gap: 32px; align-items: flex-start;">
        <div style="flex: 1;">
          <p class="total">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: <span id="total">0</span> ‡∏ö‡∏≤‡∏ó</p>
        </div>
        <div style="flex: 1; min-width: 0;">
          <h4 style="margin: 0 0 8px 0; color: #374151;">‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</h4>
          <div id="orderSummary" style="font-size: 14px; color: #6b7280; max-height: 200px; overflow-y: auto; border: 1px solid #e5e7eb; border-radius: 8px; padding: 12px; background-color: #f9fafb;">
            <p style="margin: 0; font-style: italic;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Payment slip -->
    <div class="card">
      <h3>‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô</h3>
      <div style="text-align: center; max-width: 400px; margin: 0 auto;">
        <!-- Top: Bank Account Info -->
        <div style="margin-bottom: 20px; padding: 16px; background-color: #f8fafc; border-radius: 8px; border: 1px solid #e2e8f0;">
          <p style="margin: 0 0 4px 0; font-weight: 600; color: #374151; font-size: 16px;">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</p>
          <p style="margin: 0 0 2px 0; font-size: 15px; color: #6b7280;">KBank 020-1-23387-9</p>
          <p style="margin: 0; font-size: 15px; color: #6b7280;">‡∏¢‡∏®‡∏™‡∏¢‡∏≤ ‡∏ô‡∏¥‡∏ò‡∏¥‡∏†‡∏±‡∏ó‡∏£‡∏≤‡∏£‡∏±‡∏ï‡∏ô‡πå</p>
        </div>
        
        <!-- Middle: QR Code -->
        <div style="margin-bottom: 20px;">
          <label style="display: block; margin-bottom: 8px; font-weight: 600;">QR Code ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</label>
          <img src="qr.jpg" alt="QR Code" style="max-width: 250px; height: auto; border-radius: 8px; border: 1px solid #e5e7eb;" />
          <p class="hint" style="margin-top: 8px; font-size: 12px;">‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</p>
        </div>
        
        <!-- Bottom: File Upload -->
        <div>
          <label for="paymentSlip">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô (‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û)</label>
          <input id="paymentSlip" name="paymentSlip" type="file" accept="image/*" required style="margin-top: 8px;" />
          <p class="hint">‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</p>
        </div>
      </div>
    </div>

    <div class="card">
      <button id="submitBtn" type="submit">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
      <span id="status" style="margin-left:12px;"></span>
      <p class="footer-note">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á Google Sheet ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏π‡∏õ‡∏™‡∏•‡∏¥‡∏õ‡πÉ‡∏ô Google Drive</p>
    </div>
  </form>
  </div>

  <script>
    // ---- CONFIGURATION ----
    // Toggle construction banner: true = show banner, false = hide banner
    const SHOW_CONSTRUCTION_BANNER = false;
    
    // ---- JSON CONFIG: ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤ ----
    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥ "disabled: true" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏ô‡∏±‡πâ‡∏ô
    const CATALOG = [
      { name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∏‡∏á‡∏•‡∏≤‡∏¢‡∏ó‡∏£‡∏á Standard ‡∏õ‡∏±‡∏Å‡πÇ‡∏•‡πÇ‡∏Å‡πâ - ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà Deep Navy S", price: 300},
      { name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∏‡∏á‡∏•‡∏≤‡∏¢‡∏ó‡∏£‡∏á Standard ‡∏õ‡∏±‡∏Å‡πÇ‡∏•‡πÇ‡∏Å‡πâ - ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà Deep Navy M", price: 300 },
      { name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∏‡∏á‡∏•‡∏≤‡∏¢‡∏ó‡∏£‡∏á Standard ‡∏õ‡∏±‡∏Å‡πÇ‡∏•‡πÇ‡∏Å‡πâ - ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà Deep Navy L", price: 300 },
      { name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∏‡∏á‡∏•‡∏≤‡∏¢‡∏ó‡∏£‡∏á Standard ‡∏õ‡∏±‡∏Å‡πÇ‡∏•‡πÇ‡∏Å‡πâ - ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà Deep Navy XL", price: 300 },
      { name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∏‡∏á‡∏•‡∏≤‡∏¢‡∏ó‡∏£‡∏á Standard ‡∏õ‡∏±‡∏Å‡πÇ‡∏•‡πÇ‡∏Å‡πâ - ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà Deep Navy 2XL", price: 300 },

      { name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∏‡∏á‡∏•‡∏≤‡∏¢‡∏ó‡∏£‡∏á Standard ‡∏õ‡∏±‡∏Å‡πÇ‡∏•‡πÇ‡∏Å‡πâ - ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà White S", price: 300 },
      { name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∏‡∏á‡∏•‡∏≤‡∏¢‡∏ó‡∏£‡∏á Standard ‡∏õ‡∏±‡∏Å‡πÇ‡∏•‡πÇ‡∏Å‡πâ - ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà White M", price: 300 },
      { name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∏‡∏á‡∏•‡∏≤‡∏¢‡∏ó‡∏£‡∏á Standard ‡∏õ‡∏±‡∏Å‡πÇ‡∏•‡πÇ‡∏Å‡πâ - ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà White L", price: 300 },
      { name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∏‡∏á‡∏•‡∏≤‡∏¢‡∏ó‡∏£‡∏á Standard ‡∏õ‡∏±‡∏Å‡πÇ‡∏•‡πÇ‡∏Å‡πâ - ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà White XL", price: 300  },
      { name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∏‡∏á‡∏•‡∏≤‡∏¢‡∏ó‡∏£‡∏á Standard ‡∏õ‡∏±‡∏Å‡πÇ‡∏•‡πÇ‡∏Å‡πâ - ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà White 2XL", price: 300 },

      { name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∏‡∏á‡∏•‡∏≤‡∏¢‡∏ó‡∏£‡∏á Oversize ‡∏õ‡∏±‡∏Å‡πÇ‡∏•‡πÇ‡∏Å‡πâ - ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà Female 45'' Deep Navy", price: 350 },
      { name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∏‡∏á‡∏•‡∏≤‡∏¢‡∏ó‡∏£‡∏á Oversize ‡∏õ‡∏±‡∏Å‡πÇ‡∏•‡πÇ‡∏Å‡πâ - ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà Male 50'' Deep Navy", price: 350 },
      { name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∏‡∏á‡∏•‡∏≤‡∏¢‡∏ó‡∏£‡∏á Oversize ‡∏õ‡∏±‡∏Å‡πÇ‡∏•‡πÇ‡∏Å‡πâ - ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà Female 45'' White", price: 350},
      { name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∏‡∏á‡∏•‡∏≤‡∏¢‡∏ó‡∏£‡∏á Oversize ‡∏õ‡∏±‡∏Å‡πÇ‡∏•‡πÇ‡∏Å‡πâ - ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà Male 50'' White", price: 350 },

      { name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∏‡∏á‡∏•‡∏≤‡∏¢‡∏õ‡∏±‡∏Å‡πÇ‡∏•‡πÇ‡∏Å‡πâ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏î‡πá‡∏Å 110", price: 220 },
      { name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∏‡∏á‡∏•‡∏≤‡∏¢‡∏õ‡∏±‡∏Å‡πÇ‡∏•‡πÇ‡∏Å‡πâ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏î‡πá‡∏Å 120", price: 220 },
      { name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∏‡∏á‡∏•‡∏≤‡∏¢‡∏õ‡∏±‡∏Å‡πÇ‡∏•‡πÇ‡∏Å‡πâ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏î‡πá‡∏Å 130", price: 220 },
      { name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∏‡∏á‡∏•‡∏≤‡∏¢‡∏õ‡∏±‡∏Å‡πÇ‡∏•‡πÇ‡∏Å‡πâ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏î‡πá‡∏Å 140", price: 220  },
      { name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏¢‡∏∏‡∏á‡∏•‡∏≤‡∏¢‡∏õ‡∏±‡∏Å‡πÇ‡∏•‡πÇ‡∏Å‡πâ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏î‡πá‡∏Å 150", price: 220 },
      { name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠ oversized sweater white ‡∏≠‡∏Å 50\"", price: 390 },
      { name: "‡πÄ‡∏™‡∏∑‡πâ‡∏≠ oversized sweater navy blue ‡∏≠‡∏Å 50\"", price: 390 },

      { name: "‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡∏ú‡πâ‡∏≤‡∏ó‡∏£‡∏á‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏Å‡∏•‡πâ‡∏≤‡∏° ‡∏û‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏î‡πâ ‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°‡πÅ‡∏ï‡πà‡∏™‡∏ß‡∏¢‡∏ó‡∏∏‡∏Å‡πÉ‡∏ö", price: 220 , disabled: true },
      { name: "‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤ Cross Body ‡∏™‡∏µ‡∏ü‡πâ‡∏≤", price: 250 , disabled: true },
      { name: "‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤ Cross Body ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á", price: 250 , disabled: true },
      { name: "‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤ Cross Body ‡∏™‡∏µ‡∏î‡∏≥", price: 250, disabled: true  },

      { name: "‡∏´‡∏°‡∏ß‡∏Å‡πÅ‡∏Å‡πä‡∏ö‡∏ú‡πâ‡∏≤‡∏£‡πà‡∏° ‡πÄ‡∏î‡πá‡∏Å‡πÉ‡∏™‡πà‡πÑ‡∏î‡πâ ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà‡πÉ‡∏™‡πà‡∏î‡∏µ - ‡∏´‡∏°‡∏ß‡∏Å‡πÅ‡∏Å‡πä‡∏õ 3 ‡∏™‡∏µ", price: 320 , disabled: true },
      { name: "‡∏´‡∏°‡∏ß‡∏Å‡πÅ‡∏Å‡πä‡∏ö‡∏ú‡πâ‡∏≤‡∏£‡πà‡∏° ‡πÄ‡∏î‡πá‡∏Å‡πÉ‡∏™‡πà‡πÑ‡∏î‡πâ ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà‡πÉ‡∏™‡πà‡∏î‡∏µ - ‡∏´‡∏°‡∏ß‡∏Å‡πÅ‡∏Å‡πä‡∏õ‡∏™‡∏µ‡πÄ‡∏ó‡∏≤ - ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á", price: 320 },
      { name: "‡∏´‡∏°‡∏ß‡∏Å‡πÅ‡∏Å‡πä‡∏ö‡∏ú‡πâ‡∏≤‡∏£‡πà‡∏° ‡πÄ‡∏î‡πá‡∏Å‡πÉ‡∏™‡πà‡πÑ‡∏î‡πâ ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà‡πÉ‡∏™‡πà‡∏î‡∏µ - ‡∏´‡∏°‡∏ß‡∏Å‡πÅ‡∏Å‡πä‡∏õ‡∏™‡∏µ‡∏ü‡πâ‡∏≤ - ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß", price: 320 },
      { name: "‡∏´‡∏°‡∏ß‡∏Å Bucket ‡∏ú‡πâ‡∏≤‡∏£‡πà‡∏°", price: 350 },

      { name: "‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏ï‡∏¥‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏£‡∏ñ ‡πÅ‡∏ö‡∏ö 1", price: 50, disabled: true },
      { name: "‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏ï‡∏¥‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏£‡∏ñ ‡πÅ‡∏ö‡∏ö 2", price: 50, disabled: true } //{ name: "‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏ï‡∏¥‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏£‡∏ñ ‡πÅ‡∏ö‡∏ö 2", price: 50, disabled: true },
    ];

    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbx1wYhJEGOrJb3WN5QultwtNpAQSk-sPXpWL54CWWSP-zR63FznkfAJ1lWZZUtadq3Y/exec"; // <-- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô URL ‡∏à‡∏≤‡∏Å Apps Script

    // Banner configuration: insert an image BEFORE the item at given index
    // You can control image size per banner by adding optional width/maxWidth/height/maxHeight
    // e.g. { index: 10, src: "oversize.jpg", alt: "Oversize", width: "80%", maxHeight: "300px" }
    const BANNERS = [
  { index: 0, src: "standard.png", alt: "Standard", maxWidth: "600px" },
  { index: 10, src: "oversize.png", alt: "Oversize", width: "90%", maxHeight: "600px" },
  { index: 14, src: "kids.jpg", alt: "Kids", width: "60%" },
  { index: 19, src: "sweater.png", alt: "sweat", width: "80%" },
  //{ index: 19, src: "bags.jpg", alt: "Bags", width: "50%", maxWidth: "600px" },
  //{ index: 20, src: "crossbody.jpg", alt: "Crossbody", width: "50%", maxWidth: "600px" },
  { index: 21, src: "hats.jpg", alt: "Hats", width: "85%" },
  { index: 28, src: "bucket.jpg", alt: "Bucket", width: "85%", maxHeight: "280px" }
  //{ index: 28, src: "sticker2.jpg", alt: "Stickers", width: "50%" }
];

    function appendBanner(container, cfg) {
      const wrap = document.createElement("div");
      wrap.className = "banner";
      const img = document.createElement("img");
      img.src = cfg.src;
      img.alt = cfg.alt || "";
      img.loading = "lazy";
      if (cfg.width) img.style.width = cfg.width;
      if (cfg.maxWidth) img.style.maxWidth = cfg.maxWidth;
      if (cfg.height) img.style.height = cfg.height;
      if (cfg.maxHeight) img.style.maxHeight = cfg.maxHeight;
      wrap.appendChild(img);
      container.appendChild(wrap);
    }

    // Render items with banners interleaved
    const itemsContainer = document.getElementById("itemsContainer");
    const bannersByIndex = new Map(BANNERS.map(b => [b.index, b]));
    for (let i = 0; i < CATALOG.length; i++) {
      const maybeBanner = bannersByIndex.get(i);
      if (maybeBanner) appendBanner(itemsContainer, maybeBanner);

      const item = CATALOG[i];
      if (item.disabled) {
        const hidden = document.createElement("input");
        hidden.type = "hidden";
        hidden.name = `qty_${i}`;
        hidden.value = "0";
        itemsContainer.appendChild(hidden);
        continue;
      }

      const nameEl = document.createElement("div");
      nameEl.className = "item-name";
      nameEl.textContent = `${item.name} ‚Äî ${item.price} ‡∏ö‡∏≤‡∏ó`;

      const qtyEl = document.createElement("select");
      qtyEl.className = "qty";
      qtyEl.name = `qty_${i}`;
      for (let n = 0; n <= 10; n++) {
        const opt = document.createElement("option");
        opt.value = n;
        opt.textContent = n;
        qtyEl.appendChild(opt);
      }
      qtyEl.addEventListener("change", recalcTotal);
      itemsContainer.appendChild(nameEl);
      itemsContainer.appendChild(qtyEl);
    }

    function recalcTotal() {
      let total = 0;
      const selectedItems = [];
      
      CATALOG.forEach((item, i) => {
        const qty = parseInt(document.querySelector(`[name="qty_${i}"]`).value || "0", 10);
        if (isNaN(qty) || qty < 0 || qty > 10) {
          document.getElementById("status").textContent = "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç 0‚Äì10";
          document.getElementById("status").className = "error";
        }
        total += item.price * qty;
        
        if (qty > 0) {
          selectedItems.push({
            name: item.name,
            quantity: qty,
            price: item.price,
            subtotal: item.price * qty
          });
        }
      });
      
      document.getElementById("total").textContent = total.toLocaleString();
      // Free sticker calculation removed
      
      // Update order summary
      updateOrderSummary(selectedItems);
    }
    
    function updateOrderSummary(selectedItems) {
      const summaryContainer = document.getElementById("orderSummary");
      
      if (selectedItems.length === 0) {
        summaryContainer.innerHTML = '<p style="margin: 0; font-style: italic;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</p>';
        return;
      }
      
      let summaryHTML = '';
      selectedItems.forEach(item => {
        summaryHTML += `
          <div style="margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid #e5e7eb;">
            <div style="font-weight: 600; color: #374151; margin-bottom: 2px;">${item.name}</div>
            <div style="display: flex; justify-content: space-between; align-items: center;">
              <span>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ${item.quantity} ‡∏ä‡∏¥‡πâ‡∏ô</span>
              <span style="font-weight: 600;">${item.subtotal.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
            </div>
          </div>
        `;
      });
      
      summaryContainer.innerHTML = summaryHTML;
    }

    const form = document.getElementById("orderForm");
    const submitBtn = document.getElementById("submitBtn");
    const statusSpan = document.getElementById("status");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      // basic validation
      if (document.getElementById("batch").value === "‡∏≠‡∏∑‡πà‡∏ô‡πÜ" && !document.getElementById("batchOther").value.trim()) {
        statusSpan.textContent = "‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏∏‡πà‡∏ô (‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å '‡∏≠‡∏∑‡πà‡∏ô‡πÜ')";
        statusSpan.className = "error";
        return;
      }

      // Validate quantities (0‚Äì10)
      for (let i = 0; i < CATALOG.length; i++) {
        const v = parseInt(document.querySelector(`[name="qty_${i}"]`).value || "0", 10);
        if (isNaN(v) || v < 0 || v > 10) {
          statusSpan.textContent = "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç 0‚Äì10";
          statusSpan.className = "error";
          return;
        }
      }

      // Build FormData (multipart) so we can include the image file
      const fd = new FormData();
      fd.set("contactName", document.getElementById("contactName").value.trim());
      fd.set("batch", document.getElementById("batch").value);
      fd.set("batchOther", document.getElementById("batchOther").value.trim());
      fd.set("phoneNumber", document.getElementById("phoneNumber").value.trim());
      fd.set("catalogLength", String(CATALOG.length));

      // include current total (server will re-check)
      fd.set("clientTotal", document.getElementById("total").textContent.replace(/,/g, ""));

      // For each item, send its qty by index (server-side catalog must match)
      for (let i = 0; i < CATALOG.length; i++) {
        fd.set(`qty_${i}`, document.querySelector(`[name="qty_${i}"]`).value);
      }

      const file = document.getElementById("paymentSlip").files[0];
      if (!file) {
        statusSpan.textContent = "‡πÇ‡∏õ‡∏£‡∏î‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏™‡∏•‡∏¥‡∏õ‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô";
        statusSpan.className = "error";
        return;
      }
      // Always include base64 fallback so server can decode if e.files is undefined
      try {
        const dataUrl = await new Promise((resolve, reject) => {
          const reader = new FileReader();
          reader.onload = () => resolve(reader.result);
          reader.onerror = reject;
          reader.readAsDataURL(file);
        });
        const base64 = String(dataUrl).split(",")[1] || "";
        fd.set("paymentSlipName", file.name);
        fd.set("paymentSlipType", file.type || "application/octet-stream");
        fd.set("paymentSlipBase64", base64);
      } catch (readErr) {
        // If base64 conversion fails, we still try sending the raw file
      }
      fd.set("paymentSlip", file, file.name);

      submitBtn.disabled = true;
      statusSpan.textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...";
      statusSpan.className = "";

      try {
        const res = await fetch(WEB_APP_URL, { method: "POST", body: fd });
        const msg = await res.text();
        if (res.ok) {
          statusSpan.textContent = "‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏∞/‡∏Ñ‡∏£‡∏±‡∏ö!";
          statusSpan.className = "success";
          form.reset();
          recalcTotal();
        } else {
          statusSpan.textContent = `‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${msg}`;
          statusSpan.className = "error";
        }
      } catch (err) {
        statusSpan.textContent = `‡∏™‡πà‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ${err.message}`;
        statusSpan.className = "error";
      } finally {
        submitBtn.disabled = false;
      }
    });

    // Show/hide construction banner based on configuration
    const constructionBanner = document.getElementById('constructionBanner');
    if (SHOW_CONSTRUCTION_BANNER) {
      constructionBanner.style.display = 'block';
    }

    // initial total
    recalcTotal();
  </script>
</body>
</html>